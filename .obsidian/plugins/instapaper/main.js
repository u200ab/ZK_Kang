/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/oauth-1.0a/oauth-1.0a.js
var require_oauth_1_0a = __commonJS({
  "node_modules/oauth-1.0a/oauth-1.0a.js"(exports, module2) {
    if (typeof module2 !== "undefined" && typeof exports !== "undefined") {
      module2.exports = OAuth2;
    }
    function OAuth2(opts) {
      if (!(this instanceof OAuth2)) {
        return new OAuth2(opts);
      }
      if (!opts) {
        opts = {};
      }
      if (!opts.consumer) {
        throw new Error("consumer option is required");
      }
      this.consumer = opts.consumer;
      this.nonce_length = opts.nonce_length || 32;
      this.version = opts.version || "1.0";
      this.parameter_seperator = opts.parameter_seperator || ", ";
      this.realm = opts.realm;
      if (typeof opts.last_ampersand === "undefined") {
        this.last_ampersand = true;
      } else {
        this.last_ampersand = opts.last_ampersand;
      }
      this.signature_method = opts.signature_method || "PLAINTEXT";
      if (this.signature_method == "PLAINTEXT" && !opts.hash_function) {
        opts.hash_function = function(base_string, key) {
          return key;
        };
      }
      if (!opts.hash_function) {
        throw new Error("hash_function option is required");
      }
      this.hash_function = opts.hash_function;
      this.body_hash_function = opts.body_hash_function || this.hash_function;
    }
    OAuth2.prototype.authorize = function(request, token) {
      var oauth_data = {
        oauth_consumer_key: this.consumer.key,
        oauth_nonce: this.getNonce(),
        oauth_signature_method: this.signature_method,
        oauth_timestamp: this.getTimeStamp(),
        oauth_version: this.version
      };
      if (!token) {
        token = {};
      }
      if (token.key !== void 0) {
        oauth_data.oauth_token = token.key;
      }
      if (!request.data) {
        request.data = {};
      }
      if (request.includeBodyHash) {
        oauth_data.oauth_body_hash = this.getBodyHash(request, token.secret);
      }
      oauth_data.oauth_signature = this.getSignature(request, token.secret, oauth_data);
      return oauth_data;
    };
    OAuth2.prototype.getSignature = function(request, token_secret, oauth_data) {
      return this.hash_function(this.getBaseString(request, oauth_data), this.getSigningKey(token_secret));
    };
    OAuth2.prototype.getBodyHash = function(request, token_secret) {
      var body = typeof request.data === "string" ? request.data : JSON.stringify(request.data);
      if (!this.body_hash_function) {
        throw new Error("body_hash_function option is required");
      }
      return this.body_hash_function(body, this.getSigningKey(token_secret));
    };
    OAuth2.prototype.getBaseString = function(request, oauth_data) {
      return request.method.toUpperCase() + "&" + this.percentEncode(this.getBaseUrl(request.url)) + "&" + this.percentEncode(this.getParameterString(request, oauth_data));
    };
    OAuth2.prototype.getParameterString = function(request, oauth_data) {
      var base_string_data;
      if (oauth_data.oauth_body_hash) {
        base_string_data = this.sortObject(this.percentEncodeData(this.mergeObject(oauth_data, this.deParamUrl(request.url))));
      } else {
        base_string_data = this.sortObject(this.percentEncodeData(this.mergeObject(oauth_data, this.mergeObject(request.data, this.deParamUrl(request.url)))));
      }
      var data_str = "";
      for (var i = 0; i < base_string_data.length; i++) {
        var key = base_string_data[i].key;
        var value = base_string_data[i].value;
        if (value && Array.isArray(value)) {
          value.sort();
          var valString = "";
          value.forEach(function(item, i2) {
            valString += key + "=" + item;
            if (i2 < value.length) {
              valString += "&";
            }
          }.bind(this));
          data_str += valString;
        } else {
          data_str += key + "=" + value + "&";
        }
      }
      data_str = data_str.substr(0, data_str.length - 1);
      return data_str;
    };
    OAuth2.prototype.getSigningKey = function(token_secret) {
      token_secret = token_secret || "";
      if (!this.last_ampersand && !token_secret) {
        return this.percentEncode(this.consumer.secret);
      }
      return this.percentEncode(this.consumer.secret) + "&" + this.percentEncode(token_secret);
    };
    OAuth2.prototype.getBaseUrl = function(url) {
      return url.split("?")[0];
    };
    OAuth2.prototype.deParam = function(string) {
      var arr = string.split("&");
      var data = {};
      for (var i = 0; i < arr.length; i++) {
        var item = arr[i].split("=");
        item[1] = item[1] || "";
        if (data[item[0]]) {
          if (!Array.isArray(data[item[0]])) {
            data[item[0]] = [data[item[0]]];
          }
          data[item[0]].push(decodeURIComponent(item[1]));
        } else {
          data[item[0]] = decodeURIComponent(item[1]);
        }
      }
      return data;
    };
    OAuth2.prototype.deParamUrl = function(url) {
      var tmp = url.split("?");
      if (tmp.length === 1)
        return {};
      return this.deParam(tmp[1]);
    };
    OAuth2.prototype.percentEncode = function(str) {
      return encodeURIComponent(str).replace(/\!/g, "%21").replace(/\*/g, "%2A").replace(/\'/g, "%27").replace(/\(/g, "%28").replace(/\)/g, "%29");
    };
    OAuth2.prototype.percentEncodeData = function(data) {
      var result = {};
      for (var key in data) {
        var value = data[key];
        if (value && Array.isArray(value)) {
          var newValue = [];
          value.forEach(function(val) {
            newValue.push(this.percentEncode(val));
          }.bind(this));
          value = newValue;
        } else {
          value = this.percentEncode(value);
        }
        result[this.percentEncode(key)] = value;
      }
      return result;
    };
    OAuth2.prototype.toHeader = function(oauth_data) {
      var sorted = this.sortObject(oauth_data);
      var header_value = "OAuth ";
      if (this.realm) {
        header_value += 'realm="' + this.realm + '"' + this.parameter_seperator;
      }
      for (var i = 0; i < sorted.length; i++) {
        if (sorted[i].key.indexOf("oauth_") !== 0)
          continue;
        header_value += this.percentEncode(sorted[i].key) + '="' + this.percentEncode(sorted[i].value) + '"' + this.parameter_seperator;
      }
      return {
        Authorization: header_value.substr(0, header_value.length - this.parameter_seperator.length)
        //cut the last chars
      };
    };
    OAuth2.prototype.getNonce = function() {
      var word_characters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      var result = "";
      for (var i = 0; i < this.nonce_length; i++) {
        result += word_characters[parseInt(Math.random() * word_characters.length, 10)];
      }
      return result;
    };
    OAuth2.prototype.getTimeStamp = function() {
      return parseInt((/* @__PURE__ */ new Date()).getTime() / 1e3, 10);
    };
    OAuth2.prototype.mergeObject = function(obj1, obj2) {
      obj1 = obj1 || {};
      obj2 = obj2 || {};
      var merged_obj = obj1;
      for (var key in obj2) {
        merged_obj[key] = obj2[key];
      }
      return merged_obj;
    };
    OAuth2.prototype.sortObject = function(data) {
      var keys = Object.keys(data);
      var result = [];
      keys.sort();
      for (var i = 0; i < keys.length; i++) {
        var key = keys[i];
        result.push({
          key,
          value: data[key]
        });
      }
      return result;
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => InstapaperPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/api.ts
var import_crypto = __toESM(require("crypto"));
var import_oauth_1 = __toESM(require_oauth_1_0a());
var import_obsidian = require("obsidian");
var DEFAULT_OPTIONS = {
  baseURL: "https://www.instapaper.com/api"
};
var InstapaperAPI = class {
  constructor(consumerKey, consumerSecret, options) {
    this.oauth = new import_oauth_1.default({
      consumer: {
        key: consumerKey,
        secret: consumerSecret
      },
      signature_method: "HMAC-SHA1",
      hash_function(base_string, key) {
        return import_crypto.default.createHmac("sha1", key).update(base_string).digest("base64");
      },
      parameter_seperator: ", "
    });
    this.options = Object.assign({}, DEFAULT_OPTIONS, options);
  }
  async fetch(request, token) {
    const authorization = this.oauth.authorize(request, token);
    let url = request.url;
    if (request.data && request.method == "GET") {
      url += "?" + new URLSearchParams(request.data).toString();
    }
    return await (0, import_obsidian.requestUrl)({
      url,
      method: request.method,
      contentType: "application/x-www-form-urlencoded",
      body: request.data ? new URLSearchParams(request.data).toString() : void 0,
      headers: { ...this.oauth.toHeader(authorization) },
      throw: true
    });
  }
  async getAccessToken(username, password) {
    const response = await this.fetch(
      {
        url: `${this.options.baseURL}/1.1/oauth/access_token`,
        method: "POST",
        data: {
          x_auth_username: username,
          x_auth_password: password,
          x_auth_mode: "client_auth"
        }
      }
    );
    const params = new URLSearchParams(response.text);
    const key = params.get("oauth_token") || "";
    const secret = params.get("oauth_token_secret") || "";
    return { key, secret };
  }
  async verifyCredentials(token) {
    const response = await this.fetch(
      {
        url: `${this.options.baseURL}/1.1/account/verify_credentials`,
        method: "POST"
      },
      token
    );
    const data = await response.json;
    return data[0];
  }
  async getHighlights(token, data) {
    const response = await this.fetch(
      {
        url: `${this.options.baseURL}/highlights`,
        method: "GET",
        data
      },
      token
    );
    const { highlights, bookmarks } = await response.json;
    return {
      highlights,
      bookmarks: Object.fromEntries(bookmarks.map((b) => [b.bookmark_id, b]))
    };
  }
};

// src/settings.ts
var import_obsidian2 = require("obsidian");
var DEFAULT_SETTINGS = {
  token: void 0,
  account: void 0,
  notesFolder: "Instapaper Notes",
  notesCursor: 0,
  notesFrequency: 0,
  notesSyncOnStart: true
};
var InstapaperSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    this.addAccountSetting(containerEl);
    new import_obsidian2.Setting(containerEl).setName("Notes Sync").setHeading();
    new import_obsidian2.Setting(containerEl).setName("Notes folder").setDesc("Folder in which your notes and highlights will be synced").addText((text) => {
      text.setValue(this.plugin.settings.notesFolder);
      text.onChange(async (value) => {
        const previousPath = this.plugin.settings.notesFolder;
        const newPath = (0, import_obsidian2.normalizePath)(value);
        await this.plugin.saveSettings({ notesFolder: newPath });
        const previousFile = this.app.vault.getAbstractFileByPath(previousPath);
        if (previousFile instanceof import_obsidian2.TFolder) {
          await previousFile.vault.rename(previousFile, newPath);
        }
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Sync frequency").setDesc("The frequency at which Obsidian (when running) will automatically sync your notes").addDropdown((dropdown) => {
      dropdown.addOption("0", "Manual");
      dropdown.addOption("60", "Hourly");
      dropdown.addOption("720", "Every 12 hours");
      dropdown.addOption("1440", "Every 24 hours");
      dropdown.setValue(Number(this.plugin.settings.notesFrequency).toString());
      dropdown.onChange(async (value) => {
        await this.plugin.saveSettings({ notesFrequency: parseInt(value) });
        await this.plugin.updateNotesSyncInterval();
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Sync on start").setDesc("Automatically sync when Obsidian starts or an account is connected").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.notesSyncOnStart);
      toggle.onChange(async (value) => {
        await this.plugin.saveSettings({ notesSyncOnStart: value });
      });
    });
  }
  addAccountSetting(containerEl) {
    const setting = new import_obsidian2.Setting(containerEl).setName("Instapaper account");
    if (this.plugin.settings.account) {
      return setting.setDesc(`Connected as: ${this.plugin.settings.account.username}`).addButton((button) => {
        button.setButtonText("Disconnect");
        button.setTooltip("Disconnect your Instapaper account");
        button.onClick(async () => {
          this.plugin.disconnectAccount();
          this.plugin.notice("Disconnected Instapaper account");
          this.display();
        });
      });
    }
    return setting.setDesc("Connect your Instapaper account").addButton((button) => {
      button.setButtonText("Connect");
      button.setTooltip("Connect your Instapaper account");
      button.setCta();
      button.onClick(async () => {
        new ConnectAccountModal(this.app, async (username, password) => {
          try {
            const account = await this.plugin.connectAccount(username, password);
            this.plugin.notice(`Connected Instapaper account: ${account.username}`);
          } catch (e) {
            console.log("Failed to connect account:", e);
            this.plugin.disconnectAccount();
            this.plugin.notice("Failed to connect Instapaper account");
          }
          this.display();
        }).open();
      });
    });
  }
};
var ConnectAccountModal = class extends import_obsidian2.Modal {
  constructor(app, onConnect) {
    super(app);
    this.onConnect = onConnect;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Instapaper account" });
    function updateConnectButton() {
      const valid = usernameEl.checkValidity() && passwordEl.checkValidity();
      connectButton.setDisabled(!valid);
    }
    const usernameEl = new import_obsidian2.Setting(contentEl).setName("Email or username").addText((text) => {
      text.inputEl.required = true;
      text.onChange((value) => {
        this.username = value;
        updateConnectButton();
      });
    }).components[0].inputEl;
    const passwordEl = new import_obsidian2.Setting(contentEl).setName("Password (if you have one)").addText((text) => {
      text.inputEl.type = "password";
      text.onChange((value) => {
        this.password = value;
        updateConnectButton();
      });
    }).components[0].inputEl;
    const connectButton = new import_obsidian2.Setting(contentEl).addButton((button) => {
      button.setCta();
      button.setButtonText("Connect");
      button.setDisabled(true);
      button.onClick(() => {
        this.close();
        this.onConnect(this.username, this.password);
      });
    }).components[0];
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/notes.ts
var import_obsidian3 = require("obsidian");
var linkSymbol = "\xA7";
async function syncNotes(plugin, token, cursor) {
  const { vault, fileManager } = plugin.app;
  const folder = (0, import_obsidian3.normalizePath)(plugin.settings.notesFolder);
  if (!await vault.adapter.exists(folder)) {
    await vault.createFolder(folder);
    cursor = 0;
  }
  let highlights;
  let count = 0;
  do {
    let bookmarks;
    try {
      ({ highlights, bookmarks } = await plugin.api.getHighlights(token, {
        after: cursor,
        sort: "asc"
      }));
    } catch (e) {
      plugin.log("Failed to get highlights:", e);
      return { cursor, count };
    }
    for (const highlight of highlights) {
      cursor = highlight.highlight_id;
      const article = bookmarks[highlight.article_id];
      if (!article)
        continue;
      const file = await fileForArticle(article, vault, folder);
      if (!file)
        continue;
      fileManager.processFrontMatter(file, (frontmatter) => {
        frontmatter["url"] = article.url;
        frontmatter["date"] = formatTimestamp(article.time);
        if (article.pubtime) {
          frontmatter["pubdate"] = formatTimestamp(article.pubtime);
        }
        if (article.author) {
          frontmatter["author"] = article.author;
        }
      });
      if (!hasHighlight(await vault.read(file), highlight)) {
        await vault.append(file, contentForHighlight(highlight));
        count++;
      }
    }
  } while (highlights.length > 0);
  return { cursor, count };
}
async function fileForArticle(article, vault, folder) {
  const name = article.title.replace(/[\\/:]/gm, "").substring(0, 250);
  const notePath = (0, import_obsidian3.normalizePath)(`${folder}/${name}.md`);
  const abstractFile = vault.getAbstractFileByPath(notePath);
  if (abstractFile instanceof import_obsidian3.TFile) {
    return abstractFile;
  }
  if (abstractFile instanceof import_obsidian3.TFolder) {
    console.log("%s is a folder; expected a file", abstractFile.path);
    return null;
  }
  return vault.create(notePath, "");
}
function linkForHighlight(highlight) {
  return `https://www.instapaper.com/read/${highlight.article_id}/${highlight.highlight_id}`;
}
function hasHighlight(content, highlight) {
  return content.contains(linkForHighlight(highlight));
}
function contentForHighlight(highlight) {
  let content = highlight.text.replace(/^/gm, "> ");
  content += ` [${linkSymbol}](${linkForHighlight(highlight)})`;
  content += "\n\n";
  if (highlight.note) {
    content += highlight.note + "\n\n";
  }
  return content;
}
function formatTimestamp(timestamp) {
  const date = new Date(timestamp * 1e3);
  return `${date.getFullYear().toString().padStart(4, "0")}-${(date.getMonth() + 1).toString().padStart(2, "0")}-${date.getDate().toString().padStart(2, "0")}`;
}

// src/main.ts
var InstapaperPlugin = class extends import_obsidian4.Plugin {
  constructor() {
    super(...arguments);
    this.notesSyncInProgress = false;
  }
  async onload() {
    this.api = new InstapaperAPI(
      // @ts-expect-error
      "a50094964b804f5780b6b9d6d55661ec",
      "3805a15607374a0dabc716f7e7f007d1"
    );
    await this.loadSettings();
    this.addSettingTab(new InstapaperSettingTab(this.app, this));
    this.addCommand({
      id: "sync-notes",
      name: "Sync notes",
      checkCallback: (checking) => {
        const token = this.settings.token;
        if (!token) {
          return false;
        }
        if (!checking) {
          (async () => {
            const count = await this.runNotesSync("manual");
            this.notice(`Updated ${count} Instapaper note${count == 1 ? "" : "s"}`);
          })();
        }
        return true;
      }
    });
    await this.updateNotesSyncInterval();
    if (this.settings.notesSyncOnStart && this.settings.token) {
      this.app.workspace.onLayoutReady(async () => {
        await this.runNotesSync("on start");
      });
    }
  }
  onunload() {
  }
  log(message, ...args) {
    console.log("[instapaper] " + message, ...args);
  }
  notice(message) {
    this.log(message);
    return new import_obsidian4.Notice(message);
  }
  // SETTINGS
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings(updates) {
    this.settings = {
      ...this.settings,
      ...updates
    };
    await this.saveData(this.settings);
  }
  // ACCOUNT
  async connectAccount(username, password) {
    const token = await this.api.getAccessToken(username, password);
    const account = await this.api.verifyCredentials(token);
    await this.saveSettings({
      token,
      account
    });
    await this.updateNotesSyncInterval();
    if (this.settings.notesSyncOnStart) {
      await this.runNotesSync("on connect");
    }
    return account;
  }
  async disconnectAccount() {
    await this.saveSettings({
      token: void 0,
      account: void 0
    });
    this.clearNotesSyncInterval();
  }
  // SYNC
  async runNotesSync(reason) {
    const token = this.settings.token;
    if (!token)
      return 0;
    if (this.notesSyncInProgress) {
      this.log("Notes sync is already in progress");
      return 0;
    }
    this.notesSyncInProgress = true;
    this.log(`Synchronizing notes (${reason})`);
    let count = 0;
    try {
      let cursor;
      ({ cursor, count } = await syncNotes(this, token, this.settings.notesCursor));
      await this.saveSettings({ notesCursor: cursor });
    } catch (e) {
      this.log("Notes sync failure:", e);
    } finally {
      this.notesSyncInProgress = false;
    }
    return count;
  }
  clearNotesSyncInterval() {
    window.clearInterval(this.notesSyncInterval);
    this.notesSyncInterval = void 0;
  }
  async updateNotesSyncInterval() {
    this.log(
      "Setting notes sync frequency to",
      this.settings.notesFrequency,
      this.settings.notesFrequency ? "minutes" : "(manual)"
    );
    this.clearNotesSyncInterval();
    const timeout = this.settings.notesFrequency * 60 * 1e3;
    if (!timeout)
      return;
    this.notesSyncInterval = window.setInterval(() => {
      this.runNotesSync("scheduled");
    }, timeout);
    this.registerInterval(this.notesSyncInterval);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL29hdXRoLTEuMGEvb2F1dGgtMS4wYS5qcyIsICJzcmMvbWFpbi50cyIsICJzcmMvYXBpLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvbm90ZXMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mKGV4cG9ydHMpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gT0F1dGg7XG59XG5cbi8qKlxuICogQ29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIGNvbnN1bWVyIGtleSBhbmQgc2VjcmV0XG4gKi9cbmZ1bmN0aW9uIE9BdXRoKG9wdHMpIHtcbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBPQXV0aCkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPQXV0aChvcHRzKTtcbiAgICB9XG5cbiAgICBpZighb3B0cykge1xuICAgICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgaWYoIW9wdHMuY29uc3VtZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb25zdW1lciBvcHRpb24gaXMgcmVxdWlyZWQnKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnN1bWVyICAgICAgICAgICAgPSBvcHRzLmNvbnN1bWVyO1xuICAgIHRoaXMubm9uY2VfbGVuZ3RoICAgICAgICA9IG9wdHMubm9uY2VfbGVuZ3RoIHx8IDMyO1xuICAgIHRoaXMudmVyc2lvbiAgICAgICAgICAgICA9IG9wdHMudmVyc2lvbiB8fCAnMS4wJztcbiAgICB0aGlzLnBhcmFtZXRlcl9zZXBlcmF0b3IgPSBvcHRzLnBhcmFtZXRlcl9zZXBlcmF0b3IgfHwgJywgJztcbiAgICB0aGlzLnJlYWxtICAgICAgICAgICAgICAgPSBvcHRzLnJlYWxtO1xuXG4gICAgaWYodHlwZW9mIG9wdHMubGFzdF9hbXBlcnNhbmQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMubGFzdF9hbXBlcnNhbmQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGFzdF9hbXBlcnNhbmQgPSBvcHRzLmxhc3RfYW1wZXJzYW5kO1xuICAgIH1cblxuICAgIC8vIGRlZmF1bHQgc2lnbmF0dXJlX21ldGhvZCBpcyAnUExBSU5URVhUJ1xuICAgIHRoaXMuc2lnbmF0dXJlX21ldGhvZCA9IG9wdHMuc2lnbmF0dXJlX21ldGhvZCB8fCAnUExBSU5URVhUJztcblxuICAgIGlmKHRoaXMuc2lnbmF0dXJlX21ldGhvZCA9PSAnUExBSU5URVhUJyAmJiAhb3B0cy5oYXNoX2Z1bmN0aW9uKSB7XG4gICAgICAgIG9wdHMuaGFzaF9mdW5jdGlvbiA9IGZ1bmN0aW9uKGJhc2Vfc3RyaW5nLCBrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZighb3B0cy5oYXNoX2Z1bmN0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignaGFzaF9mdW5jdGlvbiBvcHRpb24gaXMgcmVxdWlyZWQnKTtcbiAgICB9XG5cbiAgICB0aGlzLmhhc2hfZnVuY3Rpb24gPSBvcHRzLmhhc2hfZnVuY3Rpb247XG4gICAgdGhpcy5ib2R5X2hhc2hfZnVuY3Rpb24gPSBvcHRzLmJvZHlfaGFzaF9mdW5jdGlvbiB8fCB0aGlzLmhhc2hfZnVuY3Rpb247XG59XG5cbi8qKlxuICogT0F1dGggcmVxdWVzdCBhdXRob3JpemVcbiAqIEBwYXJhbSAge09iamVjdH0gcmVxdWVzdCBkYXRhXG4gKiB7XG4gKiAgICAgbWV0aG9kLFxuICogICAgIHVybCxcbiAqICAgICBkYXRhXG4gKiB9XG4gKiBAcGFyYW0gIHtPYmplY3R9IGtleSBhbmQgc2VjcmV0IHRva2VuXG4gKiBAcmV0dXJuIHtPYmplY3R9IE9BdXRoIEF1dGhvcml6ZWQgZGF0YVxuICovXG5PQXV0aC5wcm90b3R5cGUuYXV0aG9yaXplID0gZnVuY3Rpb24ocmVxdWVzdCwgdG9rZW4pIHtcbiAgICB2YXIgb2F1dGhfZGF0YSA9IHtcbiAgICAgICAgb2F1dGhfY29uc3VtZXJfa2V5OiB0aGlzLmNvbnN1bWVyLmtleSxcbiAgICAgICAgb2F1dGhfbm9uY2U6IHRoaXMuZ2V0Tm9uY2UoKSxcbiAgICAgICAgb2F1dGhfc2lnbmF0dXJlX21ldGhvZDogdGhpcy5zaWduYXR1cmVfbWV0aG9kLFxuICAgICAgICBvYXV0aF90aW1lc3RhbXA6IHRoaXMuZ2V0VGltZVN0YW1wKCksXG4gICAgICAgIG9hdXRoX3ZlcnNpb246IHRoaXMudmVyc2lvblxuICAgIH07XG5cbiAgICBpZighdG9rZW4pIHtcbiAgICAgICAgdG9rZW4gPSB7fTtcbiAgICB9XG5cbiAgICBpZih0b2tlbi5rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvYXV0aF9kYXRhLm9hdXRoX3Rva2VuID0gdG9rZW4ua2V5O1xuICAgIH1cblxuICAgIGlmKCFyZXF1ZXN0LmRhdGEpIHtcbiAgICAgICAgcmVxdWVzdC5kYXRhID0ge307XG4gICAgfVxuXG4gICAgaWYocmVxdWVzdC5pbmNsdWRlQm9keUhhc2gpIHtcbiAgICAgIG9hdXRoX2RhdGEub2F1dGhfYm9keV9oYXNoID0gdGhpcy5nZXRCb2R5SGFzaChyZXF1ZXN0LCB0b2tlbi5zZWNyZXQpXG4gICAgfVxuXG4gICAgb2F1dGhfZGF0YS5vYXV0aF9zaWduYXR1cmUgPSB0aGlzLmdldFNpZ25hdHVyZShyZXF1ZXN0LCB0b2tlbi5zZWNyZXQsIG9hdXRoX2RhdGEpO1xuXG4gICAgcmV0dXJuIG9hdXRoX2RhdGE7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIE9BdXRoIFNpZ25hdHVyZVxuICogQHBhcmFtICB7T2JqZWN0fSByZXF1ZXN0IGRhdGFcbiAqIEBwYXJhbSAge09iamVjdH0gdG9rZW5fc2VjcmV0IGtleSBhbmQgc2VjcmV0IHRva2VuXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9hdXRoX2RhdGEgICBPQXV0aCBkYXRhXG4gKiBAcmV0dXJuIHtTdHJpbmd9IFNpZ25hdHVyZVxuICovXG5PQXV0aC5wcm90b3R5cGUuZ2V0U2lnbmF0dXJlID0gZnVuY3Rpb24ocmVxdWVzdCwgdG9rZW5fc2VjcmV0LCBvYXV0aF9kYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzaF9mdW5jdGlvbih0aGlzLmdldEJhc2VTdHJpbmcocmVxdWVzdCwgb2F1dGhfZGF0YSksIHRoaXMuZ2V0U2lnbmluZ0tleSh0b2tlbl9zZWNyZXQpKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgT0F1dGggQm9keSBIYXNoXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxdWVzdCBkYXRhXG4gKi9cbk9BdXRoLnByb3RvdHlwZS5nZXRCb2R5SGFzaCA9IGZ1bmN0aW9uKHJlcXVlc3QsIHRva2VuX3NlY3JldCkge1xuICB2YXIgYm9keSA9IHR5cGVvZiByZXF1ZXN0LmRhdGEgPT09ICdzdHJpbmcnID8gcmVxdWVzdC5kYXRhIDogSlNPTi5zdHJpbmdpZnkocmVxdWVzdC5kYXRhKVxuXG4gIGlmICghdGhpcy5ib2R5X2hhc2hfZnVuY3Rpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2JvZHlfaGFzaF9mdW5jdGlvbiBvcHRpb24gaXMgcmVxdWlyZWQnKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLmJvZHlfaGFzaF9mdW5jdGlvbihib2R5LCB0aGlzLmdldFNpZ25pbmdLZXkodG9rZW5fc2VjcmV0KSlcbn07XG5cbi8qKlxuICogQmFzZSBTdHJpbmcgPSBNZXRob2QgKyBCYXNlIFVybCArIFBhcmFtZXRlclN0cmluZ1xuICogQHBhcmFtICB7T2JqZWN0fSByZXF1ZXN0IGRhdGFcbiAqIEBwYXJhbSAge09iamVjdH0gT0F1dGggZGF0YVxuICogQHJldHVybiB7U3RyaW5nfSBCYXNlIFN0cmluZ1xuICovXG5PQXV0aC5wcm90b3R5cGUuZ2V0QmFzZVN0cmluZyA9IGZ1bmN0aW9uKHJlcXVlc3QsIG9hdXRoX2RhdGEpIHtcbiAgICByZXR1cm4gcmVxdWVzdC5tZXRob2QudG9VcHBlckNhc2UoKSArICcmJyArIHRoaXMucGVyY2VudEVuY29kZSh0aGlzLmdldEJhc2VVcmwocmVxdWVzdC51cmwpKSArICcmJyArIHRoaXMucGVyY2VudEVuY29kZSh0aGlzLmdldFBhcmFtZXRlclN0cmluZyhyZXF1ZXN0LCBvYXV0aF9kYXRhKSk7XG59O1xuXG4vKipcbiAqIEdldCBkYXRhIGZyb20gdXJsXG4gKiAtPiBtZXJnZSB3aXRoIG9hdXRoIGRhdGFcbiAqIC0+IHBlcmNlbnQgZW5jb2RlIGtleSAmIHZhbHVlXG4gKiAtPiBzb3J0XG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSByZXF1ZXN0IGRhdGFcbiAqIEBwYXJhbSAge09iamVjdH0gT0F1dGggZGF0YVxuICogQHJldHVybiB7T2JqZWN0fSBQYXJhbWV0ZXIgc3RyaW5nIGRhdGFcbiAqL1xuT0F1dGgucHJvdG90eXBlLmdldFBhcmFtZXRlclN0cmluZyA9IGZ1bmN0aW9uKHJlcXVlc3QsIG9hdXRoX2RhdGEpIHtcbiAgICB2YXIgYmFzZV9zdHJpbmdfZGF0YTtcbiAgICBpZiAob2F1dGhfZGF0YS5vYXV0aF9ib2R5X2hhc2gpIHtcbiAgICAgICAgYmFzZV9zdHJpbmdfZGF0YSA9IHRoaXMuc29ydE9iamVjdCh0aGlzLnBlcmNlbnRFbmNvZGVEYXRhKHRoaXMubWVyZ2VPYmplY3Qob2F1dGhfZGF0YSwgdGhpcy5kZVBhcmFtVXJsKHJlcXVlc3QudXJsKSkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBiYXNlX3N0cmluZ19kYXRhID0gdGhpcy5zb3J0T2JqZWN0KHRoaXMucGVyY2VudEVuY29kZURhdGEodGhpcy5tZXJnZU9iamVjdChvYXV0aF9kYXRhLCB0aGlzLm1lcmdlT2JqZWN0KHJlcXVlc3QuZGF0YSwgdGhpcy5kZVBhcmFtVXJsKHJlcXVlc3QudXJsKSkpKSk7XG4gICAgfVxuXG4gICAgdmFyIGRhdGFfc3RyID0gJyc7XG5cbiAgICAvL2Jhc2Vfc3RyaW5nX2RhdGEgdG8gc3RyaW5nXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGJhc2Vfc3RyaW5nX2RhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGtleSA9IGJhc2Vfc3RyaW5nX2RhdGFbaV0ua2V5O1xuICAgICAgICB2YXIgdmFsdWUgPSBiYXNlX3N0cmluZ19kYXRhW2ldLnZhbHVlO1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgdmFsdWUgaXMgYW4gYXJyYXlcbiAgICAgICAgLy8gdGhpcyBtZWFucyB0aGF0IHRoaXMga2V5IGhhcyBtdWx0aXBsZSB2YWx1ZXNcbiAgICAgICAgaWYgKHZhbHVlICYmIEFycmF5LmlzQXJyYXkodmFsdWUpKXtcbiAgICAgICAgICAvLyBzb3J0IHRoZSBhcnJheSBmaXJzdFxuICAgICAgICAgIHZhbHVlLnNvcnQoKTtcblxuICAgICAgICAgIHZhciB2YWxTdHJpbmcgPSBcIlwiO1xuICAgICAgICAgIC8vIHNlcmlhbGl6ZSBhbGwgdmFsdWVzIGZvciB0aGlzIGtleTogZS5nLiBmb3Jta2V5PWZvcm12YWx1ZTEmZm9ybWtleT1mb3JtdmFsdWUyXG4gICAgICAgICAgdmFsdWUuZm9yRWFjaCgoZnVuY3Rpb24oaXRlbSwgaSl7XG4gICAgICAgICAgICB2YWxTdHJpbmcgKz0ga2V5ICsgJz0nICsgaXRlbTtcbiAgICAgICAgICAgIGlmIChpIDwgdmFsdWUubGVuZ3RoKXtcbiAgICAgICAgICAgICAgdmFsU3RyaW5nICs9IFwiJlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLmJpbmQodGhpcykpO1xuICAgICAgICAgIGRhdGFfc3RyICs9IHZhbFN0cmluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRhX3N0ciArPSBrZXkgKyAnPScgKyB2YWx1ZSArICcmJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vcmVtb3ZlIHRoZSBsYXN0IGNoYXJhY3RlclxuICAgIGRhdGFfc3RyID0gZGF0YV9zdHIuc3Vic3RyKDAsIGRhdGFfc3RyLmxlbmd0aCAtIDEpO1xuICAgIHJldHVybiBkYXRhX3N0cjtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgU2lnbmluZyBLZXlcbiAqIEBwYXJhbSAge1N0cmluZ30gdG9rZW5fc2VjcmV0IFNlY3JldCBUb2tlblxuICogQHJldHVybiB7U3RyaW5nfSBTaWduaW5nIEtleVxuICovXG5PQXV0aC5wcm90b3R5cGUuZ2V0U2lnbmluZ0tleSA9IGZ1bmN0aW9uKHRva2VuX3NlY3JldCkge1xuICAgIHRva2VuX3NlY3JldCA9IHRva2VuX3NlY3JldCB8fCAnJztcblxuICAgIGlmKCF0aGlzLmxhc3RfYW1wZXJzYW5kICYmICF0b2tlbl9zZWNyZXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyY2VudEVuY29kZSh0aGlzLmNvbnN1bWVyLnNlY3JldCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGVyY2VudEVuY29kZSh0aGlzLmNvbnN1bWVyLnNlY3JldCkgKyAnJicgKyB0aGlzLnBlcmNlbnRFbmNvZGUodG9rZW5fc2VjcmV0KTtcbn07XG5cbi8qKlxuICogR2V0IGJhc2UgdXJsXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHVybFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5PQXV0aC5wcm90b3R5cGUuZ2V0QmFzZVVybCA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHJldHVybiB1cmwuc3BsaXQoJz8nKVswXTtcbn07XG5cbi8qKlxuICogR2V0IGRhdGEgZnJvbSBTdHJpbmdcbiAqIEBwYXJhbSAge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbk9BdXRoLnByb3RvdHlwZS5kZVBhcmFtID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgdmFyIGFyciA9IHN0cmluZy5zcGxpdCgnJicpO1xuICAgIHZhciBkYXRhID0ge307XG5cbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBpdGVtID0gYXJyW2ldLnNwbGl0KCc9Jyk7XG5cbiAgICAgICAgLy8gJycgdmFsdWVcbiAgICAgICAgaXRlbVsxXSA9IGl0ZW1bMV0gfHwgJyc7XG5cbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIGtleSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICAvLyB0aGlzIGNhbiBvY2N1ciBpZiB0aGUgUVMgcGFydCBvZiB0aGUgdXJsIGNvbnRhaW5zIGR1cGxpY2F0ZSBrZXlzIGxpa2UgdGhpczogP2Zvcm1rZXk9Zm9ybXZhbHVlMSZmb3Jta2V5PWZvcm12YWx1ZTJcbiAgICAgICAgaWYgKGRhdGFbaXRlbVswXV0pe1xuICAgICAgICAgIC8vIHRoZSBrZXkgZXhpc3RzIGFscmVhZHlcbiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YVtpdGVtWzBdXSkpIHtcbiAgICAgICAgICAgIC8vIHJlcGxhY2UgdGhlIHZhbHVlIHdpdGggYW4gYXJyYXkgY29udGFpbmluZyB0aGUgYWxyZWFkeSBwcmVzZW50IHZhbHVlXG4gICAgICAgICAgICBkYXRhW2l0ZW1bMF1dID0gW2RhdGFbaXRlbVswXV1dO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBhbmQgYWRkIHRoZSBuZXcgZm91bmQgdmFsdWUgdG8gaXRcbiAgICAgICAgICBkYXRhW2l0ZW1bMF1dLnB1c2goZGVjb2RlVVJJQ29tcG9uZW50KGl0ZW1bMV0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBpdCBkb2Vzbid0IGV4aXN0LCBqdXN0IHB1dCB0aGUgZm91bmQgdmFsdWUgaW4gdGhlIGRhdGEgb2JqZWN0XG4gICAgICAgICAgZGF0YVtpdGVtWzBdXSA9IGRlY29kZVVSSUNvbXBvbmVudChpdGVtWzFdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xufTtcblxuLyoqXG4gKiBHZXQgZGF0YSBmcm9tIHVybFxuICogQHBhcmFtICB7U3RyaW5nfSB1cmxcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuT0F1dGgucHJvdG90eXBlLmRlUGFyYW1VcmwgPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgdG1wID0gdXJsLnNwbGl0KCc/Jyk7XG5cbiAgICBpZiAodG1wLmxlbmd0aCA9PT0gMSlcbiAgICAgICAgcmV0dXJuIHt9O1xuXG4gICAgcmV0dXJuIHRoaXMuZGVQYXJhbSh0bXBbMV0pO1xufTtcblxuLyoqXG4gKiBQZXJjZW50IEVuY29kZVxuICogQHBhcmFtICB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ30gcGVyY2VudCBlbmNvZGVkIHN0cmluZ1xuICovXG5PQXV0aC5wcm90b3R5cGUucGVyY2VudEVuY29kZSA9IGZ1bmN0aW9uKHN0cikge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyKVxuICAgICAgICAucmVwbGFjZSgvXFwhL2csIFwiJTIxXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXCovZywgXCIlMkFcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcJy9nLCBcIiUyN1wiKVxuICAgICAgICAucmVwbGFjZSgvXFwoL2csIFwiJTI4XCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXCkvZywgXCIlMjlcIik7XG59O1xuXG4vKipcbiAqIFBlcmNlbnQgRW5jb2RlIE9iamVjdFxuICogQHBhcmFtICB7T2JqZWN0fSBkYXRhXG4gKiBAcmV0dXJuIHtPYmplY3R9IHBlcmNlbnQgZW5jb2RlZCBkYXRhXG4gKi9cbk9BdXRoLnByb3RvdHlwZS5wZXJjZW50RW5jb2RlRGF0YSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICB2YXIgcmVzdWx0ID0ge307XG5cbiAgICBmb3IodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGRhdGFba2V5XTtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHZhbHVlIGlzIGFuIGFycmF5XG4gICAgICAgIGlmICh2YWx1ZSAmJiBBcnJheS5pc0FycmF5KHZhbHVlKSl7XG4gICAgICAgICAgdmFyIG5ld1ZhbHVlID0gW107XG4gICAgICAgICAgLy8gcGVyY2VudEVuY29kZSBldmVyeSB2YWx1ZVxuICAgICAgICAgIHZhbHVlLmZvckVhY2goKGZ1bmN0aW9uKHZhbCl7XG4gICAgICAgICAgICBuZXdWYWx1ZS5wdXNoKHRoaXMucGVyY2VudEVuY29kZSh2YWwpKTtcbiAgICAgICAgICB9KS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbHVlID0gdGhpcy5wZXJjZW50RW5jb2RlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRbdGhpcy5wZXJjZW50RW5jb2RlKGtleSldID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogR2V0IE9BdXRoIGRhdGEgYXMgSGVhZGVyXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9hdXRoX2RhdGFcbiAqIEByZXR1cm4ge1N0cmluZ30gSGVhZGVyIGRhdGEga2V5IC0gdmFsdWVcbiAqL1xuT0F1dGgucHJvdG90eXBlLnRvSGVhZGVyID0gZnVuY3Rpb24ob2F1dGhfZGF0YSkge1xuICAgIHZhciBzb3J0ZWQgPSB0aGlzLnNvcnRPYmplY3Qob2F1dGhfZGF0YSk7XG5cbiAgICB2YXIgaGVhZGVyX3ZhbHVlID0gJ09BdXRoICc7XG5cbiAgICBpZiAodGhpcy5yZWFsbSkge1xuICAgICAgICBoZWFkZXJfdmFsdWUgKz0gJ3JlYWxtPVwiJyArIHRoaXMucmVhbG0gKyAnXCInICsgdGhpcy5wYXJhbWV0ZXJfc2VwZXJhdG9yO1xuICAgIH1cblxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzb3J0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNvcnRlZFtpXS5rZXkuaW5kZXhPZignb2F1dGhfJykgIT09IDApXG4gICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICBoZWFkZXJfdmFsdWUgKz0gdGhpcy5wZXJjZW50RW5jb2RlKHNvcnRlZFtpXS5rZXkpICsgJz1cIicgKyB0aGlzLnBlcmNlbnRFbmNvZGUoc29ydGVkW2ldLnZhbHVlKSArICdcIicgKyB0aGlzLnBhcmFtZXRlcl9zZXBlcmF0b3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogaGVhZGVyX3ZhbHVlLnN1YnN0cigwLCBoZWFkZXJfdmFsdWUubGVuZ3RoIC0gdGhpcy5wYXJhbWV0ZXJfc2VwZXJhdG9yLmxlbmd0aCkgLy9jdXQgdGhlIGxhc3QgY2hhcnNcbiAgICB9O1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSByYW5kb20gd29yZCBjaGFyYWN0ZXJzIHN0cmluZyB3aXRoIGlucHV0IGxlbmd0aFxuICogQHJldHVybiB7U3RyaW5nfSBhIHJhbmRvbSB3b3JkIGNoYXJhY3RlcnMgc3RyaW5nXG4gKi9cbk9BdXRoLnByb3RvdHlwZS5nZXROb25jZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB3b3JkX2NoYXJhY3RlcnMgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODknO1xuICAgIHZhciByZXN1bHQgPSAnJztcblxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLm5vbmNlX2xlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdCArPSB3b3JkX2NoYXJhY3RlcnNbcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIHdvcmRfY2hhcmFjdGVycy5sZW5ndGgsIDEwKV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogR2V0IEN1cnJlbnQgVW5peCBUaW1lU3RhbXBcbiAqIEByZXR1cm4ge0ludH0gY3VycmVudCB1bml4IHRpbWVzdGFtcFxuICovXG5PQXV0aC5wcm90b3R5cGUuZ2V0VGltZVN0YW1wID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KG5ldyBEYXRlKCkuZ2V0VGltZSgpLzEwMDAsIDEwKTtcbn07XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gSEVMUEVSIEZVTkNUSU9OUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogTWVyZ2Ugb2JqZWN0XG4gKiBAcGFyYW0gIHtPYmplY3R9IG9iajFcbiAqIEBwYXJhbSAge09iamVjdH0gb2JqMlxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5PQXV0aC5wcm90b3R5cGUubWVyZ2VPYmplY3QgPSBmdW5jdGlvbihvYmoxLCBvYmoyKSB7XG4gICAgb2JqMSA9IG9iajEgfHwge307XG4gICAgb2JqMiA9IG9iajIgfHwge307XG5cbiAgICB2YXIgbWVyZ2VkX29iaiA9IG9iajE7XG4gICAgZm9yKHZhciBrZXkgaW4gb2JqMikge1xuICAgICAgICBtZXJnZWRfb2JqW2tleV0gPSBvYmoyW2tleV07XG4gICAgfVxuICAgIHJldHVybiBtZXJnZWRfb2JqO1xufTtcblxuLyoqXG4gKiBTb3J0IG9iamVjdCBieSBrZXlcbiAqIEBwYXJhbSAge09iamVjdH0gZGF0YVxuICogQHJldHVybiB7QXJyYXl9IHNvcnRlZCBhcnJheVxuICovXG5PQXV0aC5wcm90b3R5cGUuc29ydE9iamVjdCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgIHZhciByZXN1bHQgPSBbXTtcblxuICAgIGtleXMuc29ydCgpO1xuXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgdmFsdWU6IGRhdGFba2V5XSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCAiaW1wb3J0IHsgTm90aWNlLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBJbnN0YXBhcGVyQWNjb3VudCwgSW5zdGFwYXBlckFQSSB9IGZyb20gJy4vYXBpJ1xuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUywgSW5zdGFwYXBlclBsdWdpblNldHRpbmdzLCBJbnN0YXBhcGVyU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnXG5pbXBvcnQgeyBzeW5jTm90ZXMgfSBmcm9tICcuL25vdGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5zdGFwYXBlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBJbnN0YXBhcGVyUGx1Z2luU2V0dGluZ3M7XG5cdGFwaTogSW5zdGFwYXBlckFQSTtcblx0bm90ZXNTeW5jSW50ZXJ2YWw/OiBudW1iZXI7XG5cdG5vdGVzU3luY0luUHJvZ3Jlc3MgPSBmYWxzZTtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0dGhpcy5hcGkgPSBuZXcgSW5zdGFwYXBlckFQSShcblx0XHRcdC8vIEB0cy1leHBlY3QtZXJyb3Jcblx0XHRcdHByb2Nlc3MuZW52LklOU1RBUEFQRVJfQ09OU1VNRVJfS0VZLFxuXHRcdFx0cHJvY2Vzcy5lbnYuSU5TVEFQQVBFUl9DT05TVU1FUl9TRUNSRVQsXG5cdFx0KTtcblxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBJbnN0YXBhcGVyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnc3luYy1ub3RlcycsXG5cdFx0XHRuYW1lOiAnU3luYyBub3RlcycsXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0Y29uc3QgdG9rZW4gPSB0aGlzLnNldHRpbmdzLnRva2VuO1xuXHRcdFx0XHRpZiAoIXRva2VuKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFjaGVja2luZykge1xuXHRcdFx0XHRcdChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBjb3VudCA9IGF3YWl0IHRoaXMucnVuTm90ZXNTeW5jKCdtYW51YWwnKTtcblx0XHRcdFx0XHRcdHRoaXMubm90aWNlKGBVcGRhdGVkICR7Y291bnR9IEluc3RhcGFwZXIgbm90ZSR7Y291bnQgPT0gMSA/ICcnIDogJ3MnfWApO1xuXHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0sXG5cdFx0fSlcblxuXHRcdC8vIFN0YXJ0IHRoZSBub3RlcyBzeW5jIGludGVydmFsIGFuZCBvcHRpb25hbGx5IHJ1biBhbiBpbW1lZGlhdGUgc3luYy5cblx0XHQvLyBXZSBkZWxheSB0aGUgc3luYyBicmllZmx5IHRvIGFsbG93IE9ic2lkaWFuIHRpbWUgdG8gZmluaXNoIGxvYWRpbmc7XG5cdFx0Ly8gb3RoZXJ3aXNlLCBpdCBkb2Vzbid0IGFwcGVhciB0byByZXNwb25kIHRvIFZhdWx0IHVwZGF0ZXMgKGUuZy4gbmV3XG5cdFx0Ly8gZm9sZGVycykgdGhhdCBhcmUgcHJvZHVjZWQgYnkgdGhlIHN5bmMgb3BlcmF0aW9uLlxuXHRcdGF3YWl0IHRoaXMudXBkYXRlTm90ZXNTeW5jSW50ZXJ2YWwoKTtcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5ub3Rlc1N5bmNPblN0YXJ0ICYmIHRoaXMuc2V0dGluZ3MudG9rZW4pIHtcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KGFzeW5jICgpID0+IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5ydW5Ob3Rlc1N5bmMoJ29uIHN0YXJ0Jyk7XG5cdFx0XHR9KVxuXHRcdH1cblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHR9XG5cblx0bG9nKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogdW5rbm93bltdKTogdm9pZCB7XG5cdFx0Y29uc29sZS5sb2coJ1tpbnN0YXBhcGVyXSAnICsgbWVzc2FnZSwgLi4uYXJncyk7XG5cdH1cblxuXHRub3RpY2UobWVzc2FnZTogc3RyaW5nKTogTm90aWNlIHtcblx0XHR0aGlzLmxvZyhtZXNzYWdlKTtcblx0XHRyZXR1cm4gbmV3IE5vdGljZShtZXNzYWdlKTtcblx0fVxuXG5cdC8vIFNFVFRJTkdTXG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKHVwZGF0ZXM/OiBQYXJ0aWFsPEluc3RhcGFwZXJQbHVnaW5TZXR0aW5ncz4pIHtcblx0XHR0aGlzLnNldHRpbmdzID0ge1xuXHRcdFx0Li4udGhpcy5zZXR0aW5ncyxcblx0XHRcdC4uLnVwZGF0ZXMsXG5cdFx0fVxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHQvLyBBQ0NPVU5UXG5cblx0YXN5bmMgY29ubmVjdEFjY291bnQodXNlcm5hbWU6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8SW5zdGFwYXBlckFjY291bnQ+IHtcblx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMuYXBpLmdldEFjY2Vzc1Rva2VuKHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cdFx0Y29uc3QgYWNjb3VudCA9IGF3YWl0IHRoaXMuYXBpLnZlcmlmeUNyZWRlbnRpYWxzKHRva2VuKTtcblx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncyh7XG5cdFx0XHR0b2tlbjogdG9rZW4sXG5cdFx0XHRhY2NvdW50OiBhY2NvdW50LFxuXHRcdH0pO1xuXG5cdFx0YXdhaXQgdGhpcy51cGRhdGVOb3Rlc1N5bmNJbnRlcnZhbCgpO1xuXHRcdGlmICh0aGlzLnNldHRpbmdzLm5vdGVzU3luY09uU3RhcnQpIHtcblx0XHRcdGF3YWl0IHRoaXMucnVuTm90ZXNTeW5jKCdvbiBjb25uZWN0Jyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFjY291bnQ7XG5cdH1cblxuXHRhc3luYyBkaXNjb25uZWN0QWNjb3VudCgpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncyh7XG5cdFx0XHR0b2tlbjogdW5kZWZpbmVkLFxuXHRcdFx0YWNjb3VudDogdW5kZWZpbmVkLFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5jbGVhck5vdGVzU3luY0ludGVydmFsKCk7XG5cdH1cblxuXHQvLyBTWU5DXG5cblx0YXN5bmMgcnVuTm90ZXNTeW5jKHJlYXNvbjogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcblx0XHRjb25zdCB0b2tlbiA9IHRoaXMuc2V0dGluZ3MudG9rZW47XG5cdFx0aWYgKCF0b2tlbikgcmV0dXJuIDA7XG5cblx0XHRpZiAodGhpcy5ub3Rlc1N5bmNJblByb2dyZXNzKSB7XG5cdFx0XHR0aGlzLmxvZygnTm90ZXMgc3luYyBpcyBhbHJlYWR5IGluIHByb2dyZXNzJyk7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHR0aGlzLm5vdGVzU3luY0luUHJvZ3Jlc3MgPSB0cnVlO1xuXHRcdHRoaXMubG9nKGBTeW5jaHJvbml6aW5nIG5vdGVzICgke3JlYXNvbn0pYCk7XG5cdFx0bGV0IGNvdW50ID0gMDtcblxuXHRcdHRyeSB7XG5cdFx0XHRsZXQgY3Vyc29yO1xuXHRcdFx0KHsgY3Vyc29yLCBjb3VudCB9ID0gYXdhaXQgc3luY05vdGVzKHRoaXMsIHRva2VuLCB0aGlzLnNldHRpbmdzLm5vdGVzQ3Vyc29yKSk7XG5cdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncyh7IG5vdGVzQ3Vyc29yOiBjdXJzb3IgfSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0dGhpcy5sb2coJ05vdGVzIHN5bmMgZmFpbHVyZTonLCBlKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5ub3Rlc1N5bmNJblByb2dyZXNzID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvdW50O1xuXHR9XG5cblx0Y2xlYXJOb3Rlc1N5bmNJbnRlcnZhbCgpIHtcblx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLm5vdGVzU3luY0ludGVydmFsKTtcblx0XHR0aGlzLm5vdGVzU3luY0ludGVydmFsID0gdW5kZWZpbmVkO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlTm90ZXNTeW5jSW50ZXJ2YWwoKSB7XG5cdFx0dGhpcy5sb2coJ1NldHRpbmcgbm90ZXMgc3luYyBmcmVxdWVuY3kgdG8nLFxuXHRcdFx0dGhpcy5zZXR0aW5ncy5ub3Rlc0ZyZXF1ZW5jeSxcblx0XHRcdHRoaXMuc2V0dGluZ3Mubm90ZXNGcmVxdWVuY3kgPyAnbWludXRlcycgOiAnKG1hbnVhbCknXG5cdFx0KTtcblxuXHRcdHRoaXMuY2xlYXJOb3Rlc1N5bmNJbnRlcnZhbCgpO1xuXG5cdFx0Y29uc3QgdGltZW91dCA9IHRoaXMuc2V0dGluZ3Mubm90ZXNGcmVxdWVuY3kgKiA2MCAqIDEwMDA7XG5cdFx0aWYgKCF0aW1lb3V0KSByZXR1cm47IC8vIG1hbnVhbFxuXG5cdFx0dGhpcy5ub3Rlc1N5bmNJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG5cdFx0XHR0aGlzLnJ1bk5vdGVzU3luYygnc2NoZWR1bGVkJylcblx0XHR9LCB0aW1lb3V0KTtcblx0XHR0aGlzLnJlZ2lzdGVySW50ZXJ2YWwodGhpcy5ub3Rlc1N5bmNJbnRlcnZhbCk7XG5cdH1cbn0iLCAiaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgT0F1dGggZnJvbSBcIm9hdXRoLTEuMGFcIjtcbmltcG9ydCB7IHJlcXVlc3RVcmwgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGludGVyZmFjZSBJbnN0YXBhcGVyQ2xpZW50T3B0aW9ucyB7XG4gICAgYmFzZVVSTDogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX09QVElPTlM6IEluc3RhcGFwZXJDbGllbnRPcHRpb25zID0ge1xuICAgIGJhc2VVUkw6ICdodHRwczovL3d3dy5pbnN0YXBhcGVyLmNvbS9hcGknXG59XG5cbi8vIExpa2UgT0F1dGguVG9rZW4gYnV0IGRpc3RpbmN0IHNvIGl0IGNhbiBiZSB1c2VkIGFzIGEgc3RhYmxlIFNldHRpbmdzIHR5cGUuXG5leHBvcnQgdHlwZSBJbnN0YXBhcGVyQWNjZXNzVG9rZW4gPSB7XG4gICAga2V5OiBzdHJpbmc7XG4gICAgc2VjcmV0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIEluc3RhcGFwZXJBY2NvdW50ID0ge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICB1c2VyX2lkOiBudW1iZXI7XG4gICAgdXNlcm5hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgSW5zdGFwYXBlckJvb2ttYXJrID0ge1xuICAgIGF1dGhvcjogc3RyaW5nO1xuICAgIGJvb2ttYXJrX2lkOiBudW1iZXI7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBoYXNoOiBzdHJpbmc7XG4gICAgcHJpdmF0ZV9zb3VyY2U6IHN0cmluZztcbiAgICBwcm9ncmVzczogbnVtYmVyO1xuICAgIHByb2dyZXNzX3RpbWVzdGFtcDogbnVtYmVyO1xuICAgIHB1YnRpbWU6IG51bWJlcjtcbiAgICBzdGFycmVkOiBzdHJpbmc7XG4gICAgdGltZTogbnVtYmVyO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIHVybDogc3RyaW5nO1xuICAgIHdvcmRzOiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIEluc3RhcGFwZXJIaWdobGlnaHQgPSB7XG4gICAgaGlnaGxpZ2h0X2lkOiBudW1iZXI7XG4gICAgYXJ0aWNsZV9pZDogc3RyaW5nO1xuICAgIHRpbWU6IG51bWJlcjtcbiAgICB0ZXh0OiBzdHJpbmc7XG4gICAgbm90ZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEluc3RhcGFwZXJBUEkge1xuICAgIG9hdXRoOiBPQXV0aFxuICAgIG9wdGlvbnM6IEluc3RhcGFwZXJDbGllbnRPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoY29uc3VtZXJLZXk6IHN0cmluZywgY29uc3VtZXJTZWNyZXQ6IHN0cmluZywgb3B0aW9ucz86IEluc3RhcGFwZXJDbGllbnRPcHRpb25zKSB7XG4gICAgICAgIHRoaXMub2F1dGggPSBuZXcgT0F1dGgoe1xuICAgICAgICAgICAgY29uc3VtZXI6IHtcbiAgICAgICAgICAgICAgICBrZXk6IGNvbnN1bWVyS2V5LFxuICAgICAgICAgICAgICAgIHNlY3JldDogY29uc3VtZXJTZWNyZXQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2lnbmF0dXJlX21ldGhvZDogXCJITUFDLVNIQTFcIixcbiAgICAgICAgICAgIGhhc2hfZnVuY3Rpb24oYmFzZV9zdHJpbmc6IHN0cmluZywga2V5OiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3J5cHRvXG4gICAgICAgICAgICAgICAgICAgIC5jcmVhdGVIbWFjKFwic2hhMVwiLCBrZXkpXG4gICAgICAgICAgICAgICAgICAgIC51cGRhdGUoYmFzZV9zdHJpbmcpXG4gICAgICAgICAgICAgICAgICAgIC5kaWdlc3QoXCJiYXNlNjRcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFyYW1ldGVyX3NlcGVyYXRvcjogXCIsIFwiXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX09QVElPTlMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZmV0Y2gocmVxdWVzdDogT0F1dGguUmVxdWVzdE9wdGlvbnMsIHRva2VuPzogT0F1dGguVG9rZW4pIHtcbiAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvbiA9IHRoaXMub2F1dGguYXV0aG9yaXplKHJlcXVlc3QsIHRva2VuKTtcblxuICAgICAgICBsZXQgdXJsID0gcmVxdWVzdC51cmw7XG4gICAgICAgIGlmIChyZXF1ZXN0LmRhdGEgJiYgcmVxdWVzdC5tZXRob2QgPT0gJ0dFVCcpIHtcbiAgICAgICAgICAgIHVybCArPSAnPycgKyBuZXcgVVJMU2VhcmNoUGFyYW1zKHJlcXVlc3QuZGF0YSkudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCxcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFxuICAgICAgICAgICAgYm9keTogcmVxdWVzdC5kYXRhID8gbmV3IFVSTFNlYXJjaFBhcmFtcyhyZXF1ZXN0LmRhdGEpLnRvU3RyaW5nKCkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBoZWFkZXJzOiB7IC4uLnRoaXMub2F1dGgudG9IZWFkZXIoYXV0aG9yaXphdGlvbikgfSxcbiAgICAgICAgICAgIHRocm93OiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBY2Nlc3NUb2tlbih1c2VybmFtZTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxJbnN0YXBhcGVyQWNjZXNzVG9rZW4+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHVybDogYCR7dGhpcy5vcHRpb25zLmJhc2VVUkx9LzEuMS9vYXV0aC9hY2Nlc3NfdG9rZW5gLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgeF9hdXRoX3VzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgeF9hdXRoX3Bhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgeF9hdXRoX21vZGU6IFwiY2xpZW50X2F1dGhcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfVxuICAgICAgICApXG5cbiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhyZXNwb25zZS50ZXh0KTtcbiAgICAgICAgY29uc3Qga2V5ID0gcGFyYW1zLmdldChcIm9hdXRoX3Rva2VuXCIpIHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IHNlY3JldCA9IHBhcmFtcy5nZXQoXCJvYXV0aF90b2tlbl9zZWNyZXRcIikgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIHsga2V5LCBzZWNyZXQgfVxuICAgIH1cblxuICAgIGFzeW5jIHZlcmlmeUNyZWRlbnRpYWxzKHRva2VuOiBJbnN0YXBhcGVyQWNjZXNzVG9rZW4pOiBQcm9taXNlPEluc3RhcGFwZXJBY2NvdW50PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMub3B0aW9ucy5iYXNlVVJMfS8xLjEvYWNjb3VudC92ZXJpZnlfY3JlZGVudGlhbHNgLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRva2VuLFxuICAgICAgICApXG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24gYXMgW0luc3RhcGFwZXJBY2NvdW50XVxuICAgICAgICByZXR1cm4gZGF0YVswXTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRIaWdobGlnaHRzKFxuICAgICAgICB0b2tlbjogSW5zdGFwYXBlckFjY2Vzc1Rva2VuLFxuICAgICAgICBkYXRhPzoge1xuICAgICAgICAgICAgYWZ0ZXI/OiBudW1iZXIsXG4gICAgICAgICAgICBvZmZzZXQ/OiBudW1iZXIsXG4gICAgICAgICAgICBsaW1pdD86IG51bWJlcixcbiAgICAgICAgICAgIHNvcnQ/OiAnYXNjJyB8ICdkZXNjJyxcblxuICAgICAgICB9LFxuICAgICk6IFByb21pc2U8e1xuICAgICAgICBoaWdobGlnaHRzOiBbSW5zdGFwYXBlckhpZ2hsaWdodF0sXG4gICAgICAgIGJvb2ttYXJrczogUmVjb3JkPHN0cmluZywgSW5zdGFwYXBlckJvb2ttYXJrPixcbiAgICB9PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMub3B0aW9ucy5iYXNlVVJMfS9oaWdobGlnaHRzYCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgIClcblxuICAgICAgICBjb25zdCB7IGhpZ2hsaWdodHMsIGJvb2ttYXJrcyB9OiB7XG4gICAgICAgICAgICBoaWdobGlnaHRzOiBbSW5zdGFwYXBlckhpZ2hsaWdodF0sXG4gICAgICAgICAgICBib29rbWFya3M6IFtJbnN0YXBhcGVyQm9va21hcmtdLFxuICAgICAgICB9ID0gYXdhaXQgcmVzcG9uc2UuanNvbjtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGlnaGxpZ2h0cyxcbiAgICAgICAgICAgIGJvb2ttYXJrczogT2JqZWN0LmZyb21FbnRyaWVzKGJvb2ttYXJrcy5tYXAoYiA9PiBbYi5ib29rbWFya19pZCwgYl0pKVxuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIEJ1dHRvbkNvbXBvbmVudCwgTW9kYWwsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRGb2xkZXIsIFRleHRDb21wb25lbnQsIG5vcm1hbGl6ZVBhdGggfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBJbnN0YXBhcGVyUGx1Z2luIGZyb20gXCIuL21haW5cIjtcbmltcG9ydCB0eXBlIHsgSW5zdGFwYXBlckFjY2Vzc1Rva2VuLCBJbnN0YXBhcGVyQWNjb3VudCB9IGZyb20gXCIuL2FwaVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RhcGFwZXJQbHVnaW5TZXR0aW5ncyB7XG4gICAgdG9rZW4/OiBJbnN0YXBhcGVyQWNjZXNzVG9rZW47XG4gICAgYWNjb3VudD86IEluc3RhcGFwZXJBY2NvdW50O1xuICAgIG5vdGVzRm9sZGVyOiBzdHJpbmc7XG4gICAgbm90ZXNDdXJzb3I6IG51bWJlcjtcbiAgICBub3Rlc0ZyZXF1ZW5jeTogbnVtYmVyO1xuICAgIG5vdGVzU3luY09uU3RhcnQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBJbnN0YXBhcGVyUGx1Z2luU2V0dGluZ3MgPSB7XG4gICAgdG9rZW46IHVuZGVmaW5lZCxcbiAgICBhY2NvdW50OiB1bmRlZmluZWQsXG4gICAgbm90ZXNGb2xkZXI6ICdJbnN0YXBhcGVyIE5vdGVzJyxcbiAgICBub3Rlc0N1cnNvcjogMCxcbiAgICBub3Rlc0ZyZXF1ZW5jeTogMCxcbiAgICBub3Rlc1N5bmNPblN0YXJ0OiB0cnVlLFxufVxuXG5leHBvcnQgY2xhc3MgSW5zdGFwYXBlclNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IEluc3RhcGFwZXJQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBJbnN0YXBhcGVyUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIC8vIEFDQ09VTlRcbiAgICAgICAgdGhpcy5hZGRBY2NvdW50U2V0dGluZyhjb250YWluZXJFbCk7XG5cbiAgICAgICAgLy8gTk9URVMgU1lOQ1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZSgnTm90ZXMgU3luYycpLnNldEhlYWRpbmcoKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdOb3RlcyBmb2xkZXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ0ZvbGRlciBpbiB3aGljaCB5b3VyIG5vdGVzIGFuZCBoaWdobGlnaHRzIHdpbGwgYmUgc3luY2VkJylcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc0ZvbGRlcilcbiAgICAgICAgICAgICAgICB0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c1BhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc0ZvbGRlcjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGF0aCA9IG5vcm1hbGl6ZVBhdGgodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoeyBub3Rlc0ZvbGRlcjogbmV3UGF0aCB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocHJldmlvdXNQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzRmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByZXZpb3VzRmlsZS52YXVsdC5yZW5hbWUocHJldmlvdXNGaWxlLCBuZXdQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTeW5jIGZyZXF1ZW5jeScpXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIGZyZXF1ZW5jeSBhdCB3aGljaCBPYnNpZGlhbiAod2hlbiBydW5uaW5nKSB3aWxsIGF1dG9tYXRpY2FsbHkgc3luYyB5b3VyIG5vdGVzJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oXCIwXCIsIFwiTWFudWFsXCIpO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihcIjYwXCIsIFwiSG91cmx5XCIpO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihcIjcyMFwiLCBcIkV2ZXJ5IDEyIGhvdXJzXCIpXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKFwiMTQ0MFwiLCBcIkV2ZXJ5IDI0IGhvdXJzXCIpXG5cbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZShOdW1iZXIodGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZXNGcmVxdWVuY3kpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoeyBub3Rlc0ZyZXF1ZW5jeTogcGFyc2VJbnQodmFsdWUpIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi51cGRhdGVOb3Rlc1N5bmNJbnRlcnZhbCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU3luYyBvbiBzdGFydCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBzeW5jIHdoZW4gT2JzaWRpYW4gc3RhcnRzIG9yIGFuIGFjY291bnQgaXMgY29ubmVjdGVkJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3Rlc1N5bmNPblN0YXJ0KTtcbiAgICAgICAgICAgICAgICB0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncyh7IG5vdGVzU3luY09uU3RhcnQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRBY2NvdW50U2V0dGluZyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiBTZXR0aW5nIHtcbiAgICAgICAgY29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0luc3RhcGFwZXIgYWNjb3VudCcpO1xuXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY2NvdW50KSB7XG4gICAgICAgICAgICByZXR1cm4gc2V0dGluZ1xuICAgICAgICAgICAgICAgIC5zZXREZXNjKGBDb25uZWN0ZWQgYXM6ICR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuYWNjb3VudC51c2VybmFtZX1gKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnRGlzY29ubmVjdCcpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0VG9vbHRpcCgnRGlzY29ubmVjdCB5b3VyIEluc3RhcGFwZXIgYWNjb3VudCcpXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRpc2Nvbm5lY3RBY2NvdW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5ub3RpY2UoJ0Rpc2Nvbm5lY3RlZCBJbnN0YXBhcGVyIGFjY291bnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNldHRpbmdcbiAgICAgICAgICAgIC5zZXREZXNjKCdDb25uZWN0IHlvdXIgSW5zdGFwYXBlciBhY2NvdW50JylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdDb25uZWN0Jyk7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldFRvb2x0aXAoJ0Nvbm5lY3QgeW91ciBJbnN0YXBhcGVyIGFjY291bnQnKVxuICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRDdGEoKTtcbiAgICAgICAgICAgICAgICBidXR0b24ub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBDb25uZWN0QWNjb3VudE1vZGFsKHRoaXMuYXBwLCBhc3luYyAodXNlcm5hbWU6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgdGhpcy5wbHVnaW4uY29ubmVjdEFjY291bnQodXNlcm5hbWUsIHBhc3N3b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5ub3RpY2UoYENvbm5lY3RlZCBJbnN0YXBhcGVyIGFjY291bnQ6ICR7YWNjb3VudC51c2VybmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNvbm5lY3QgYWNjb3VudDonLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kaXNjb25uZWN0QWNjb3VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLm5vdGljZSgnRmFpbGVkIHRvIGNvbm5lY3QgSW5zdGFwYXBlciBhY2NvdW50Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XG5cbmNsYXNzIENvbm5lY3RBY2NvdW50TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgdXNlcm5hbWU6IHN0cmluZ1xuICAgIHBhc3N3b3JkOiBzdHJpbmdcbiAgICBvbkNvbm5lY3Q6ICh1c2VybmFtZTogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uQ29ubmVjdDogKHVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5vbkNvbm5lY3QgPSBvbkNvbm5lY3Q7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiSW5zdGFwYXBlciBhY2NvdW50XCIgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ29ubmVjdEJ1dHRvbigpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkID0gdXNlcm5hbWVFbC5jaGVja1ZhbGlkaXR5KCkgJiYgcGFzc3dvcmRFbC5jaGVja1ZhbGlkaXR5KCk7XG4gICAgICAgICAgICBjb25uZWN0QnV0dG9uLnNldERpc2FibGVkKCF2YWxpZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1c2VybmFtZUVsID0gKG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiRW1haWwgb3IgdXNlcm5hbWVcIilcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0ZXh0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJuYW1lID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvbm5lY3RCdXR0b24oKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSkuY29tcG9uZW50c1swXSBhcyBUZXh0Q29tcG9uZW50KS5pbnB1dEVsO1xuXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkRWwgPSAobmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJQYXNzd29yZCAoaWYgeW91IGhhdmUgb25lKVwiKVxuICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwudHlwZSA9IFwicGFzc3dvcmRcIlxuICAgICAgICAgICAgICAgIHRleHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ29ubmVjdEJ1dHRvbigpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KS5jb21wb25lbnRzWzBdIGFzIFRleHRDb21wb25lbnQpLmlucHV0RWw7XG5cbiAgICAgICAgY29uc3QgY29ubmVjdEJ1dHRvbiA9IG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRDdGEoKTtcbiAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dChcIkNvbm5lY3RcIik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ29ubmVjdCh0aGlzLnVzZXJuYW1lLCB0aGlzLnBhc3N3b3JkKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSkuY29tcG9uZW50c1swXSBhcyBCdXR0b25Db21wb25lbnQ7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBURmlsZSwgVEZvbGRlciwgVmF1bHQsIG5vcm1hbGl6ZVBhdGggfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIEluc3RhcGFwZXJQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuaW1wb3J0IHR5cGUgeyBJbnN0YXBhcGVyQWNjZXNzVG9rZW4sIEluc3RhcGFwZXJCb29rbWFyaywgSW5zdGFwYXBlckhpZ2hsaWdodCB9IGZyb20gXCIuL2FwaVwiO1xuXG5jb25zdCBsaW5rU3ltYm9sID0gJ1x1MDBBNyc7IC8vICdcdTIxOTcnOyAvLyAnXHUyMUFBJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN5bmNOb3RlcyhcbiAgICBwbHVnaW46IEluc3RhcGFwZXJQbHVnaW4sXG4gICAgdG9rZW46IEluc3RhcGFwZXJBY2Nlc3NUb2tlbixcbiAgICBjdXJzb3I6IG51bWJlcixcbik6IFByb21pc2U8e1xuICAgIGN1cnNvcjogbnVtYmVyO1xuICAgIGNvdW50OiBudW1iZXI7XG59PiB7XG4gICAgY29uc3QgeyB2YXVsdCwgZmlsZU1hbmFnZXIgfSA9IHBsdWdpbi5hcHA7XG5cbiAgICBjb25zdCBmb2xkZXIgPSBub3JtYWxpemVQYXRoKHBsdWdpbi5zZXR0aW5ncy5ub3Rlc0ZvbGRlcik7XG4gICAgaWYgKCFhd2FpdCB2YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXIpKSB7XG4gICAgICAgIGF3YWl0IHZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXIpXG4gICAgICAgIGN1cnNvciA9IDA7XG4gICAgfVxuXG4gICAgbGV0IGhpZ2hsaWdodHM6IFtJbnN0YXBhcGVySGlnaGxpZ2h0XVxuICAgIGxldCBjb3VudCA9IDA7XG5cbiAgICBkbyB7XG4gICAgICAgIGxldCBib29rbWFya3M6IFJlY29yZDxzdHJpbmcsIEluc3RhcGFwZXJCb29rbWFyaz5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgKHsgaGlnaGxpZ2h0cywgYm9va21hcmtzIH0gPSBhd2FpdCBwbHVnaW4uYXBpLmdldEhpZ2hsaWdodHModG9rZW4sIHtcbiAgICAgICAgICAgICAgICBhZnRlcjogY3Vyc29yLFxuICAgICAgICAgICAgICAgIHNvcnQ6ICdhc2MnLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBwbHVnaW4ubG9nKCdGYWlsZWQgdG8gZ2V0IGhpZ2hsaWdodHM6JywgZSk7XG4gICAgICAgICAgICByZXR1cm4geyBjdXJzb3IsIGNvdW50IH07XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGNvbnN0IGhpZ2hsaWdodCBvZiBoaWdobGlnaHRzKSB7XG4gICAgICAgICAgICBjdXJzb3IgPSBoaWdobGlnaHQuaGlnaGxpZ2h0X2lkO1xuXG4gICAgICAgICAgICBjb25zdCBhcnRpY2xlID0gYm9va21hcmtzW2hpZ2hsaWdodC5hcnRpY2xlX2lkXTtcbiAgICAgICAgICAgIGlmICghYXJ0aWNsZSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCBmaWxlRm9yQXJ0aWNsZShhcnRpY2xlLCB2YXVsdCwgZm9sZGVyKTtcbiAgICAgICAgICAgIGlmICghZmlsZSkgY29udGludWU7XG5cbiAgICAgICAgICAgIC8vIFJlZnJlc2ggdGhlIGZpbGUncyBmcm9udCBtYXR0ZXIgKGZvciBuZXcgYW5kIGV4aXN0aW5nIGZpbGVzKS5cbiAgICAgICAgICAgIGZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCAoZnJvbnRtYXR0ZXIpID0+IHtcbiAgICAgICAgICAgICAgICBmcm9udG1hdHRlclsndXJsJ10gPSBhcnRpY2xlLnVybDtcbiAgICAgICAgICAgICAgICBmcm9udG1hdHRlclsnZGF0ZSddID0gZm9ybWF0VGltZXN0YW1wKGFydGljbGUudGltZSk7XG4gICAgICAgICAgICAgICAgaWYgKGFydGljbGUucHVidGltZSkge1xuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlclsncHViZGF0ZSddID0gZm9ybWF0VGltZXN0YW1wKGFydGljbGUucHVidGltZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcnRpY2xlLmF1dGhvcikge1xuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlclsnYXV0aG9yJ10gPSBhcnRpY2xlLmF1dGhvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAvLyBXZSdsbCBuZWFybHkgYWx3YXlzIGFwcGVuZCB0aGUgbmV3IGhpZ2hsaWdodCB0byB0aGUgZmlsZSwgYnV0XG4gICAgICAgICAgICAvLyB3ZSBmaXJzdCBjaGVjayBpZiB0aGUgaGlnaGxpZ2h0IGhhcyBwcmV2aW91c2x5IGJlZW4gYWRkZWQganVzdFxuICAgICAgICAgICAgLy8gaW4gY2FzZSB0aGUgY3Vyc29yIHdhcyByZXNldCBvciBpcyBvdGhlcndpc2Ugb3V0LW9mLXN5bmMgd2l0aFxuICAgICAgICAgICAgLy8gdGhlIGNvbnRlbnRzIG9mIHRoZSB2YXVsdC5cbiAgICAgICAgICAgIGlmICghaGFzSGlnaGxpZ2h0KGF3YWl0IHZhdWx0LnJlYWQoZmlsZSksIGhpZ2hsaWdodCkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB2YXVsdC5hcHBlbmQoZmlsZSwgY29udGVudEZvckhpZ2hsaWdodChoaWdobGlnaHQpKTtcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSB3aGlsZSAoaGlnaGxpZ2h0cy5sZW5ndGggPiAwKTtcblxuICAgIHJldHVybiB7IGN1cnNvciwgY291bnQgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmlsZUZvckFydGljbGUoXG4gICAgYXJ0aWNsZTogSW5zdGFwYXBlckJvb2ttYXJrLFxuICAgIHZhdWx0OiBWYXVsdCxcbiAgICBmb2xkZXI6IHN0cmluZyxcbik6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG4gICAgY29uc3QgbmFtZSA9IGFydGljbGUudGl0bGUucmVwbGFjZSgvW1xcXFwvOl0vZ20sICcnKS5zdWJzdHJpbmcoMCwgMjUwKTtcbiAgICBjb25zdCBub3RlUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7Zm9sZGVyfS8ke25hbWV9Lm1kYCk7XG4gICAgY29uc3QgYWJzdHJhY3RGaWxlID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5vdGVQYXRoKTtcblxuICAgIGlmIChhYnN0cmFjdEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3RGaWxlO1xuICAgIH1cbiAgICBpZiAoYWJzdHJhY3RGaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICBjb25zb2xlLmxvZygnJXMgaXMgYSBmb2xkZXI7IGV4cGVjdGVkIGEgZmlsZScsIGFic3RyYWN0RmlsZS5wYXRoKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhdWx0LmNyZWF0ZShub3RlUGF0aCwgJycpO1xufVxuXG5mdW5jdGlvbiBsaW5rRm9ySGlnaGxpZ2h0KGhpZ2hsaWdodDogSW5zdGFwYXBlckhpZ2hsaWdodCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBodHRwczovL3d3dy5pbnN0YXBhcGVyLmNvbS9yZWFkLyR7aGlnaGxpZ2h0LmFydGljbGVfaWR9LyR7aGlnaGxpZ2h0LmhpZ2hsaWdodF9pZH1gXG59XG5cbmZ1bmN0aW9uIGhhc0hpZ2hsaWdodChjb250ZW50OiBzdHJpbmcsIGhpZ2hsaWdodDogSW5zdGFwYXBlckhpZ2hsaWdodCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBjb250ZW50LmNvbnRhaW5zKGxpbmtGb3JIaWdobGlnaHQoaGlnaGxpZ2h0KSk7XG59XG5cbmZ1bmN0aW9uIGNvbnRlbnRGb3JIaWdobGlnaHQoaGlnaGxpZ2h0OiBJbnN0YXBhcGVySGlnaGxpZ2h0KTogc3RyaW5nIHtcbiAgICBsZXQgY29udGVudCA9IGhpZ2hsaWdodC50ZXh0LnJlcGxhY2UoL14vZ20sICc+ICcpO1xuICAgIGNvbnRlbnQgKz0gYCBbJHtsaW5rU3ltYm9sfV0oJHtsaW5rRm9ySGlnaGxpZ2h0KGhpZ2hsaWdodCl9KWA7XG4gICAgY29udGVudCArPSBcIlxcblxcblwiXG4gICAgaWYgKGhpZ2hsaWdodC5ub3RlKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gaGlnaGxpZ2h0Lm5vdGUgKyBcIlxcblxcblwiO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG5mdW5jdGlvbiBmb3JtYXRUaW1lc3RhbXAodGltZXN0YW1wOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgKiAxMDAwKTtcbiAgICByZXR1cm4gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkucGFkU3RhcnQoNCwgJzAnKX0tYFxuICAgICAgICArIGAkeyhkYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9LWBcbiAgICAgICAgKyBgJHtkYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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Q3ZCO0FBQUEsTUFDQTtBQUFBLElBQ0QsQ0FBQztBQUVELFVBQU0sS0FBSyx3QkFBd0I7QUFDbkMsUUFBSSxLQUFLLFNBQVMsa0JBQWtCO0FBQ25DLFlBQU0sS0FBSyxhQUFhLFlBQVk7QUFBQSxJQUNyQztBQUVBLFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxNQUFNLG9CQUFvQjtBQUN6QixVQUFNLEtBQUssYUFBYTtBQUFBLE1BQ3ZCLE9BQU87QUFBQSxNQUNQLFNBQVM7QUFBQSxJQUNWLENBQUM7QUFFRCxTQUFLLHVCQUF1QjtBQUFBLEVBQzdCO0FBQUE7QUFBQSxFQUlBLE1BQU0sYUFBYSxRQUFpQztBQUNuRCxVQUFNLFFBQVEsS0FBSyxTQUFTO0FBQzVCLFFBQUksQ0FBQztBQUFPLGFBQU87QUFFbkIsUUFBSSxLQUFLLHFCQUFxQjtBQUM3QixXQUFLLElBQUksbUNBQW1DO0FBQzVDLGFBQU87QUFBQSxJQUNSO0FBRUEsU0FBSyxzQkFBc0I7QUFDM0IsU0FBSyxJQUFJLHdCQUF3QixNQUFNLEdBQUc7QUFDMUMsUUFBSSxRQUFRO0FBRVosUUFBSTtBQUNILFVBQUk7QUFDSixPQUFDLEVBQUUsUUFBUSxNQUFNLElBQUksTUFBTSxVQUFVLE1BQU0sT0FBTyxLQUFLLFNBQVMsV0FBVztBQUMzRSxZQUFNLEtBQUssYUFBYSxFQUFFLGFBQWEsT0FBTyxDQUFDO0FBQUEsSUFDaEQsU0FBUyxHQUFHO0FBQ1gsV0FBSyxJQUFJLHVCQUF1QixDQUFDO0FBQUEsSUFDbEMsVUFBRTtBQUNELFdBQUssc0JBQXNCO0FBQUEsSUFDNUI7QUFFQSxXQUFPO0FBQUEsRUFDUjtBQUFBLEVBRUEseUJBQXlCO0FBQ3hCLFdBQU8sY0FBYyxLQUFLLGlCQUFpQjtBQUMzQyxTQUFLLG9CQUFvQjtBQUFBLEVBQzFCO0FBQUEsRUFFQSxNQUFNLDBCQUEwQjtBQUMvQixTQUFLO0FBQUEsTUFBSTtBQUFBLE1BQ1IsS0FBSyxTQUFTO0FBQUEsTUFDZCxLQUFLLFNBQVMsaUJBQWlCLFlBQVk7QUFBQSxJQUM1QztBQUVBLFNBQUssdUJBQXVCO0FBRTVCLFVBQU0sVUFBVSxLQUFLLFNBQVMsaUJBQWlCLEtBQUs7QUFDcEQsUUFBSSxDQUFDO0FBQVM7QUFFZCxTQUFLLG9CQUFvQixPQUFPLFlBQVksTUFBTTtBQUNqRCxXQUFLLGFBQWEsV0FBVztBQUFBLElBQzlCLEdBQUcsT0FBTztBQUNWLFNBQUssaUJBQWlCLEtBQUssaUJBQWlCO0FBQUEsRUFDN0M7QUFDRDsiLAogICJuYW1lcyI6IFsibW9kdWxlIiwgIk9BdXRoIiwgImkiLCAiaW1wb3J0X29ic2lkaWFuIiwgIk9BdXRoIiwgImNyeXB0byIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIl0KfQo=
